<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panduan Interaktif SOP PARHATA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* General and Sidebar Styles */
        body {
            font-family: 'Inter', sans-serif;
        }
        .content-title {
            font-family: 'Roboto Slab', serif;
        }
        .sidebar-link {
            transition: all 0.2s ease-in-out;
            border-left: 4px solid transparent;
        }
        .sidebar-link.active {
            border-left-color: #3b82f6; /* blue-500 */
            background-color: #1e293b; /* slate-800 */
            color: #f8fafc; /* slate-50 */
        }
        .sidebar-link:hover {
            background-color: #334155; /* slate-700 */
        }
        .content-panel {
            display: none;
        }
        .content-panel.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        /* Custom scrollbar for webkit browsers */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1e293b; /* slate-800 */
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #475569; /* slate-600 */
            border-radius: 10px;
            border: 2px solid #1e293b; /* slate-800 */
        }

        /* Styles from 'pencapaian-kinerja' file */
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        /* Adjusted max-height for better content display */
        .accordion-button.open + .accordion-content {
            max-height: 2000px; /* Increased for more content */
        }
        /* Adjusted text color for better readability */
        .accordion-content {
            color: #d1d5db; /* gray-300 */
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #1a202c; /* bg-gray-900 */
            color: #f7fafc; /* text-white */
            padding: 2rem;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); /* shadow-2xl */
            max-width: 500px;
            width: 90%;
            transform: translateY(-20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .modal-overlay.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        /* Styles for Pelatihan Panel */
        #panel-pelatihan .pelatihan-sidebar-active {
            background-color: #374151; /* bg-gray-700 */
            color: #ffffff; /* text-white */
            border-left: 3px solid #2563eb; /* bg-blue-600 */
        }
        #panel-pelatihan .pelatihan-content-section {
            display: none;
        }
        #panel-pelatihan .pelatihan-content-section.active {
            display: block;
        }
        .info-trigger {
            cursor: pointer;
        }
        .info-trigger:hover {
            color: #ffffff;
        }
        .info-modal-content {
            transition: transform 0.3s ease;
        }

        /* Styles for Jabatan Panel */
        #panel-jabatan .jabatan-sidebar-active {
            background-color: #374151; /* bg-gray-700 */
            color: #ffffff; /* text-white */
            border-left: 3px solid #3b82f6; /* blue-500 */
        }
        #panel-jabatan .jabatan-content-section {
            display: none;
        }
        #panel-jabatan .jabatan-content-section.active {
            display: block;
        }
        #panel-jabatan .info-popup {
            display: none;
            position: absolute;
            z-index: 50;
            width: 350px;
            background-color: #374151; /* bg-gray-700 */
            border: 1px solid #4b5563; /* border-gray-600 */
            border-radius: 0.5rem;
            padding: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            pointer-events: none;
        }
        #panel-jabatan .info-icon:hover + .info-popup, #panel-jabatan .info-icon-table:hover + .info-popup {
            display: block;
        }
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.7;
                transform: scale(1.1);
            }
        }
        #panel-jabatan .pulse-animate {
            animation: pulse 2s infinite;
        }

        /* Styles from index.html for Certification */
        .info-box {
            background-color: #4a5568;
            border-left: 4px solid #63b3ed;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
            color: #e2e8f0;
        }
        .button-primary {
            background-color: #4299e1;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            border: none;
        }
        .button-primary:hover {
            background-color: #3182ce;
        }
        .button-secondary {
            background-color: #a0aec0;
            color: #2d3748;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            border: none;
        }
        .button-secondary:hover {
            background-color: #718096;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #cbd5e0;
        }
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid #4a5568;
            background-color: #2d3748;
            color: #e2e8f0;
            box-sizing: border-box;
        }
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #63b3ed;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.5);
        }
        .grid-cols-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }
        .table-container {
            overflow-x: auto;
            margin-top: 1.5rem;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background-color: #2d3748;
            border-radius: 0.5rem;
            overflow: hidden;
        }
        .data-table th,
        .data-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #4a5568;
        }
        .data-table th {
            background-color: #4a5568;
            color: #cbd5e0;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.875rem;
        }
        .data-table tr:last-child td {
            border-bottom: none;
        }
        .data-table .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .data-table .status-badge.diajukan {
            background-color: #f6ad55; /* Orange */
            color: #2d3748;
        }
        .data-table .status-badge.disetujui {
            background-color: #68d391; /* Green */
            color: #2d3748;
        }
        .data-table .status-badge.ditolak {
            background-color: #fc8181; /* Red */
            color: #2d3748;
        }
        .action-links a, .action-links button {
            color: #63b3ed;
            margin-right: 0.75rem;
            text-decoration: none;
            transition: color 0.2s;
            background: none;
            border: none;
            cursor: pointer;
        }
        .action-links a:hover, .action-links button:hover {
            color: #4299e1;
        }
        .filter-buttons button {
            background-color: #4a5568;
            color: #cbd5e0;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            border: none;
        }
        .filter-buttons button.active,
        .filter-buttons button:hover {
            background-color: #63b3ed;
            color: #ffffff;
        }
        .search-input {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid #4a5568;
            background-color: #2d3748;
            color: #e2e8f0;
            width: 200px;
        }
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.7); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #2d3748;
            margin: auto;
            padding: 2rem;
            border-radius: 0.75rem;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }
        .close-button {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-button:hover,
        .close-button:focus {
            color: #e2e8f0;
            text-decoration: none;
        }

        /* Card View Styles */
        .card-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        .certification-card {
            background-color: #4a5568;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .certification-card h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }
        .certification-card p {
            font-size: 0.95rem;
            color: #cbd5e0;
            margin-bottom: 0.5rem;
        }
        .certification-card .level-narrative {
            font-style: italic;
            font-size: 0.85rem;
            color: #a0aec0;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid #63b3ed;
        }
        .certification-card .card-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
            margin-top: 1rem;
        }
        .certification-card .card-actions .button-small {
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
            border-radius: 0.375rem;
        }
        .view-toggle-buttons button {
            background-color: #4a5568;
            color: #cbd5e0;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            margin-left: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            border: none;
        }
        .view-toggle-buttons button.active,
        .view-toggle-buttons button:hover {
            background-color: #63b3ed;
            color: #ffffff;
        }
        .narrative-explanation {
            font-size: 0.875rem;
            color: #a0aec0;
            margin-top: 0.5rem;
            min-height: 1.5rem; /* Ensure space even when empty */
        }

        /* Styles for Sertifikasi Panel Inner Sidebar */
        #panel-sertifikasi .sertifikasi-sidebar-active {
            background-color: #374151; /* bg-gray-700 */
            color: #ffffff; /* text-white */
            border-left: 3px solid #3b82f6; /* border-blue-500 */
        }
        #panel-sertifikasi .sertifikasi-content-section {
            display: none;
        }
        #panel-sertifikasi .sertifikasi-content-section.active {
            display: block;
        }

        /* Styles for Kinerja Panel Inner Sidebar */
        #panel-kinerja .kinerja-sidebar-active {
            background-color: #374151; /* bg-gray-700 */
            color: #ffffff; /* text-white */
            border-left: 3px solid #A9C5A0; /* Custom green from original design */
        }
        #panel-kinerja .kinerja-content-section {
            display: none;
        }
        #panel-kinerja .kinerja-content-section.active {
            display: block;
        }

        /* New styles for dropdown explanation box */
        .explanation-box {
            background-color: #2d3748; /* bg-gray-800 */
            border: 1px solid #4a5568; /* border-gray-600 */
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1.5rem;
            margin-top: 1.5rem;
            color: #e2e8f0; /* text-gray-200 */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: none; /* Hidden by default */
        }
        .explanation-box p {
            margin-bottom: 0.5rem;
        }
        .explanation-box ul {
            list-style-type: disc;
            margin-left: 1.25rem;
        }
        .explanation-box ul li {
            margin-bottom: 0.25rem;
        }

    </style>
</head>
<body class="bg-slate-100">

    <div class="flex h-screen bg-gray-900 text-white">
        <!-- Sidebar -->
        <aside class="w-64 bg-slate-900 text-slate-200 flex flex-col fixed h-full">
            <div class="px-6 py-4 border-b border-slate-700">
                <h1 class="text-xl font-bold text-white flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-400"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                    <span>Panduan SOP</span>
                </h1>
                <p class="text-sm text-slate-400 mt-1">Portofolio PARHATA</p>
            </div>
            <nav id="sidebar-nav" class="flex-1 p-4 space-y-2 overflow-y-auto custom-scrollbar">
                <a href="#" class="sidebar-link block py-2.5 px-4 rounded font-medium active" data-target="panel-panduan-umum">Panduan Umum</a>
                <a href="#" class="sidebar-link block py-2.5 px-4 rounded font-medium" data-target="panel-jabatan">Riwayat Jabatan</a>
                <a href="#" class="sidebar-link block py-2.5 px-4 rounded font-medium" data-target="panel-pendidikan">Riwayat Pendidikan</a>
                <a href="#" class="sidebar-link block py-2.5 px-4 rounded font-medium" data-target="panel-pelatihan">Riwayat Pelatihan</a>
                <a href="#" class="sidebar-link block py-2.5 px-4 rounded font-medium" data-target="panel-seminar">Riwayat Seminar</a>
                <a href="#" class="sidebar-link block py-2.5 px-4 rounded font-medium" data-target="panel-sertifikasi">Riwayat Sertifikasi</a>
                <a href="#" class="sidebar-link block py-2.5 px-4 rounded font-medium" data-target="panel-kinerja">Pencapaian Kinerja</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 ml-64 p-6 md:p-10 overflow-y-auto bg-slate-50 text-slate-800">
            <div id="content-area">
                <!-- Panel Panduan Umum -->
                <div id="panel-panduan-umum" class="content-panel active">
                    <h2 class="text-3xl font-bold content-title text-slate-800 mb-6">Panduan Umum PARHATA</h2>
                    <div class="bg-white p-8 rounded-xl shadow-md">
                        <h3 class="text-2xl md:text-3xl font-bold text-slate-800 text-center mb-2">Panduan Penggunaan Aplikasi PARHATA</h3>
                        <p class="mt-2 text-lg text-slate-600 max-w-3xl mx-auto text-center">Tahapan dan jadwal pemutakhiran data mandiri dan proses verifikasi se-Provinsi Sumatera Utara.</p>
                        
                        <div class="mt-10">
                            <h4 class="text-xl font-bold text-center mb-8 text-slate-800">Linimasa Proses Pemutakhiran Data</h4>
                            <div class="max-w-2xl mx-auto relative">
                                <div class="border-l-2 border-slate-200 absolute h-full top-0 left-3"></div>
                                <div class="mb-8 flex items-center w-full">
                                    <div class="z-10 bg-blue-500 h-6 w-6 rounded-full shadow-lg"></div>
                                    <div class="ml-4">
                                        <p class="font-semibold text-blue-600">16 Juli – 18 Juli 2025</p>
                                        <h5 class="font-bold text-slate-800">Periode Pengisian Data Mandiri</h5>
                                        <p class="text-slate-600 text-sm">Pegawai melakukan pemutakhiran data portofolio.</p>
                                    </div>
                                </div>
                                <div class="mb-8 flex items-center w-full">
                                    <div class="z-10 bg-slate-400 h-6 w-6 rounded-full shadow-lg"></div>
                                    <div class="ml-4">
                                        <p class="font-semibold text-slate-500">18 Juli 2025, 23:59 WIB</p>
                                        <h5 class="font-bold text-slate-800">Penguncian Data</h5>
                                        <p class="text-slate-600 text-sm">Sistem otomatis mengunci akses input dan edit.</p>
                                    </div>
                                </div>
                                <div class="mb-8 flex items-center w-full">
                                    <div class="z-10 bg-purple-500 h-6 w-6 rounded-full shadow-lg"></div>
                                    <div class="ml-4">
                                        <p class="font-semibold text-purple-600">21–25 Juli 2025</p>
                                        <h5 class="font-bold text-slate-800">Periode Penilaian / Verifikasi</h5>
                                        <p class="text-slate-600 text-sm">Tim Verifikator melakukan penilaian data pegawai.</p>
                                    </div>
                                </div>
                                <div class="flex items-center w-full">
                                    <div class="z-10 bg-green-500 h-6 w-6 rounded-full shadow-lg"></div>
                                    <div class="ml-4">
                                        <h5 class="font-bold text-slate-800">Hasil Penilaian</h5>
                                        <p class="text-slate-600 text-sm">Hasil akhir disampaikan melalui sistem PARHATA.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Panel Riwayat Jabatan -->
                <div id="panel-jabatan" class="content-panel bg-gray-900 text-gray-300 p-0 -m-6 md:-m-10">
                    <div class="flex h-full">
                        <!-- Inner Sidebar for Jabatan -->
                        <aside class="w-64 bg-gray-800 text-gray-300 flex-col hidden md:flex">
                            <div class="h-16 flex items-center justify-center border-b border-gray-700">
                                <h1 class="text-xl font-bold text-white">Menu Jabatan</h1>
                            </div>
                            <nav id="jabatan-sidebar-nav" class="flex-1 px-4 py-4">
                                <a href="#jabatan-panduan-umum" class="jabatan-sidebar-link flex items-center px-4 py-2.5 rounded-lg hover:bg-gray-700 transition-colors duration-200 jabatan-sidebar-active">
                                    <i class="fas fa-book-open w-6"></i>
                                    <span>Panduan Umum</span>
                                </a>
                                <a href="#jabatan-riwayat-jabatan" class="jabatan-sidebar-link flex items-center px-4 py-2.5 mt-2 rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                    <i class="fas fa-history w-6"></i>
                                    <span>Riwayat Jabatan</span>
                                </a>
                                <a href="#jabatan-simulasi" class="jabatan-sidebar-link flex items-center px-4 py-2.5 mt-2 rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                    <i class="fas fa-edit w-6"></i>
                                    <span>Simulasi & Pengisian</span>
                                </a>
                            </nav>
                        </aside>
                           <!-- Inner Content for Jabatan -->
                        <div class="flex-1 p-6 lg:p-10 overflow-y-auto">
                            <section id="jabatan-panduan-umum" class="jabatan-content-section active">
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg">
                                    <h2 class="text-3xl font-bold text-white mb-4">Panduan Umum Portofolio Jabatan</h2>
                                    <p class="mb-6 text-gray-400">Selamat datang di modul Portofolio Riwayat Jabatan. Modul ini bertujuan untuk mendokumentasikan dan menilai rekam jejak jabatan Anda secara sistematis.</p>
                                    <div class="space-y-4">
                                        <div>
                                            <h3 class="text-xl font-semibold text-blue-400 mb-2">Tujuan Pengisian</h3>
                                            <p>Pengisian portofolio ini penting untuk keperluan manajemen talenta, pengembangan karir, dan proses seleksi jabatan. Data yang akurat dan lengkap akan membantu sistem dalam memberikan penilaian yang objektif.</p>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-semibold text-blue-400 mb-2">Dasar Hukum</h3>
                                            <p>Pengelolaan data dan penilaian kinerja Aparatur Sipil Negara (ASN) didasarkan pada Peraturan Pemerintah (PP) No. 30 Tahun 2019 tentang Penilaian Kinerja PNS dan peraturan terkait lainnya yang berlaku.</p>
                                        </div>
                                        <div>
                                            <h3 class="text-xl font-semibold text-blue-400 mb-2">Sinkronisasi Data</h3>
                                            <p>Perlu diketahui bahwa sebagian besar data riwayat jabatan Anda, seperti nama jabatan, TMT, dan wilayah, ditarik secara otomatis dari Sistem Informasi Kepegawaian (SIMPEG). Sinkronisasi ini dilakukan oleh sistem PARHATA setiap hari pada pukul <span class="font-bold text-yellow-400">00:00 WIB</span>. Pastikan data Anda di SIMPEG selalu ter-update.</p>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="jabatan-riwayat-jabatan" class="jabatan-content-section">
                                <h2 class="text-3xl font-bold text-white mb-2">Riwayat Jabatan</h2>
                                <p class="text-gray-400 mb-6">Berikut adalah daftar riwayat jabatan Anda.</p>
                                <div class="bg-blue-900/20 border border-blue-500 text-blue-300 px-4 py-3 rounded-lg relative mb-6" role="alert">
                                    <strong class="font-bold">Informasi Penting!</strong>
                                    <span class="block sm:inline ml-2">Data awal ditarik dari SIMPEG. Klik tombol <b class="text-yellow-400">Lengkapi</b> untuk mengisi data Relevansi dan Dampak/Kontribusi.</span>
                                </div>
                                <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                                    <div class="p-4">
                                        <div class="flex justify-between items-center">
                                            <div>
                                                <button class="bg-gray-700 text-white px-4 py-2 rounded-lg text-sm">Semua</button>
                                                <button class="bg-gray-900 text-gray-400 px-4 py-2 rounded-lg text-sm ml-2">Disetujui 0</button>
                                                <button class="bg-gray-900 text-gray-400 px-4 py-2 rounded-lg text-sm ml-2">Ditolak 0</button>
                                                <button class="bg-gray-900 text-gray-400 px-4 py-2 rounded-lg text-sm ml-2">Diajukan 11</button>
                                            </div>
                                            <div class="relative">
                                                <input type="search" placeholder="Search" class="bg-gray-700 rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-sm text-left text-gray-400">
                                            <thead class="text-xs text-gray-300 uppercase bg-gray-700/50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 info-trigger" data-title="Info: Jabatan" data-info="Nama jabatan dan unit kerja. Data ditarik dari SIMPEG.">Jabatan</th>
                                                    <th scope="col" class="px-6 py-3 info-trigger" data-title="Info: Wilayah" data-info="Lokasi penempatan untuk jabatan terkait. Data ditarik dari SIMPEG.">Wilayah</th>
                                                    <th scope="col" class="px-6 py-3 info-trigger" data-title="Info: TMT" data-info="Tanggal Mulai Terhitung (TMT) jabatan. Data ditarik dari SIMPEG.">TMT</th>
                                                    <th scope="col" class="px-6 py-3 info-trigger" data-title="Info: Durasi Jabatan" data-info="Lama waktu menjabat pada posisi tersebut. Dihitung otomatis oleh sistem.">Durasi Jabatan</th>
                                                    <th scope="col" class="px-6 py-3 info-trigger" data-title="Info: Relevansi" data-info="Tingkat kesesuaian jabatan dengan jabatan saat ini. Diisi oleh pegawai dan diverifikasi.">Relevansi</th>
                                                    <th scope="col" class="px-6 py-3 info-trigger" data-title="Info: Dampak/Kontribusi" data-info="Tingkat pengaruh atau kontribusi jabatan terhadap organisasi. Diisi oleh pegawai dan diverifikasi.">Dampak/Kontribusi</th>
                                                    <th scope="col" class="px-6 py-3 info-trigger" data-title="Info: Status" data-info="Status pengajuan data: Diajukan, Disetujui, atau Ditolak.">Status</th>
                                                    <th scope="col" class="px-6 py-3 info-trigger" data-title="Info: Aksi" data-info="Tindakan yang dapat dilakukan, seperti melengkapi atau melihat detail data.">Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="border-b border-gray-700">
                                                    <td class="px-6 py-4 font-medium text-white">Pranata Humas Ahli Pertama Subbagian Kepegawaian & Hukum</td>
                                                    <td class="px-6 py-4">Prov. Sumatera Utara</td>
                                                    <td class="px-6 py-4">2011-01-01</td>
                                                    <td class="px-6 py-4">2 Tahun</td>
                                                    <td class="px-6 py-4">Sebagian besar relevan</td>
                                                    <td class="px-6 py-4">Dampak Sedang</td>
                                                    <td class="px-6 py-4"><span class="bg-yellow-900 text-yellow-300 text-xs font-medium me-2 px-2.5 py-0.5 rounded-full">Diajukan</span></td>
                                                    <td class="px-6 py-4 text-center">
                                                        <button class="jabatan-lengkapi-btn font-medium text-blue-500 hover:underline pulse-animate">
                                                            <i class="fas fa-edit mr-1"></i>Lengkapi
                                                        </button>
                                                    </td>
                                                </tr>
                                                <tr class="border-b border-gray-700 bg-gray-800/50">
                                                    <td class="px-6 py-4 font-medium text-white">Penugasan Pranata Humas Mahir Subbagian Kepegawaian & Hukum</td>
                                                    <td class="px-6 py-4">Prov. Sumatera Utara</td>
                                                    <td class="px-6 py-4">2013-01-02</td>
                                                    <td class="px-6 py-4">1 Tahun</td>
                                                    <td class="px-6 py-4">Sebagian besar relevan</td>
                                                    <td class="px-6 py-4">Dampak Sedang</td>
                                                    <td class="px-6 py-4"><span class="bg-yellow-900 text-yellow-300 text-xs font-medium me-2 px-2.5 py-0.5 rounded-full">Diajukan</span></td>
                                                    <td class="px-6 py-4 text-center">
                                                        <button class="jabatan-lengkapi-btn font-medium text-blue-500 hover:underline">
                                                            <i class="fas fa-edit mr-1"></i>Lengkapi
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </section>
                            <section id="jabatan-simulasi" class="jabatan-content-section">
                                <div class="flex justify-between items-center mb-6">
                                    <div>
                                        <h2 class="text-3xl font-bold text-white">Edit Jabatan Hist</h2>
                                        <p class="text-gray-400">Silakan lengkapi data berikut dengan benar.</p>
                                    </div>
                                    <button class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200">
                                        <i class="fas fa-trash-alt mr-2"></i>Delete
                                    </button>
                                </div>
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg">
                                    <div class="space-y-6">
                                        <div>
                                            <label for="jabatan-edit-jabatan" class="block mb-2 text-sm font-medium text-gray-300">Jabatan</label>
                                            <input type="text" id="jabatan-edit-jabatan" class="bg-gray-700 border border-gray-600 text-gray-300 text-sm rounded-lg block w-full p-2.5 cursor-not-allowed" value="Pranata Humas Ahli Pertama Subbagian Kepegawaian & Hukum" disabled>
                                        </div>
                                        <div class="grid md:grid-cols-2 gap-6">
                                            <div>
                                                <label for="relevansi" class="block mb-2 text-sm font-medium text-gray-300 relative">
                                                    Relevansi Jabatan <span class="text-red-500">*</span>
                                                    <i class="fas fa-info-circle text-blue-400 ml-1 cursor-pointer info-icon"></i>
                                                    <div class="info-popup">
                                                        <h4 class="font-bold text-white mb-2">Keterangan Relevansi Jabatan</h4>
                                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                                            <li><b class="text-gray-200">Tidak Relevan:</b> Tidak berkaitan langsung dengan tugas jabatan saat ini.</li>
                                                            <li><b class="text-gray-200">Sebagian Relevan:</b> Sebagian tugas atau tanggung jawab mendukung jabatan saat ini.</li>
                                                            <li><b class="text-gray-200">Sangat Relevan:</b> Jabatan sepenuhnya mendukung dan relevan dengan tugas saat ini.</li>
                                                        </ul>
                                                    </div>
                                                </label>
                                                <select id="relevansi" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                                                    <option>Pilih Relevansi</option>
                                                    <option value="Tidak relevan">Tidak Relevan</option>
                                                    <option value="Sebagian relevan">Sebagian Relevan</option>
                                                    <option value="Sangat relevan" selected>Sangat Relevan</option>
                                                </select>
                                                <p class="mt-2 text-xs text-gray-500">Jabatan sepenuhnya mendukung dan relevan dengan tugas saat ini.</p>
                                            </div>
                                            <div>
                                                <label for="dampak" class="block mb-2 text-sm font-medium text-gray-300 relative">
                                                    Dampak/Kontribusi <span class="text-red-500">*</span>
                                                    <i class="fas fa-info-circle text-blue-400 ml-1 cursor-pointer info-icon"></i>
                                                    <div class="info-popup">
                                                        <h4 class="font-bold text-white mb-2">Keterangan Kontribusi & Dampak</h4>
                                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                                            <li><b class="text-gray-200">Dampak Rendah:</b> Jabatan dengan kontribusi terbatas pada tugas operasional.</li>
                                                            <li><b class="text-gray-200">Dampak Sedang:</b> Jabatan dengan kontribusi pada pengelolaan program atau tim.</li>
                                                            <li><b class="text-gray-200">Dampak Tinggi:</b> Jabatan strategis yang berpengaruh pada pengambilan keputusan besar.</li>
                                                        </ul>
                                                    </div>
                                                </label>
                                                <select id="dampak" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                                                    <option>Pilih Dampak</option>
                                                    <option value="Dampak rendah">Dampak Rendah</option>
                                                    <option value="Dampak sedang" selected>Dampak Sedang</option>
                                                    <option value="Dampak tinggi">Dampak Tinggi</option>
                                                </select>
                                                <p class="mt-2 text-xs text-gray-500">Jabatan dengan kontribusi pada pengelolaan program atau tim.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-8 flex items-center gap-4">
                                        <button type="button" class="text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 transition-colors duration-200">Save Changes</button>
                                        <button type="button" id="jabatan-cancel-edit" class="text-gray-300 bg-transparent hover:bg-gray-700 border border-gray-600 font-medium rounded-lg text-sm px-5 py-2.5 transition-colors duration-200">Cancel</button>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>

                <div id="panel-pendidikan" class="content-panel">
                    <h2 class="text-3xl font-bold content-title text-slate-800 mb-6">SOP Riwayat Pendidikan</h2>
                    <div class="bg-white p-8 rounded-xl shadow-md">
                        <div class="flex items-start gap-6">
                            <div class="bg-green-100 text-green-600 p-4 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
                            </div>
                            <div>
                                <h3 class="text-2xl font-bold text-slate-800">Melengkapi Riwayat Pendidikan</h3>
                                <p class="text-slate-600 mt-1">Data riwayat pendidikan (D-III ke atas) ditarik otomatis dari SIMPEG.</p>
                            </div>
                        </div>
                        <div class="mt-8 border-t pt-6">
                            <h4 class="font-bold text-lg text-slate-700 mb-4">Tugas Anda:</h4>
                            <ol class="list-decimal list-inside space-y-4 text-slate-600">
                                <li><span class="font-semibold">Pilih Data:</span> Klik "Lengkapi" pada data yang relevan.</li>
                                <li><span class="font-semibold">Isi Detail:</span> Lengkapi "Prestasi Akademik" dan "Relevansi Pendidikan".</li>
                                <li><span class="font-semibold">Unggah Bukti Dukung:</span> Unggah Ijazah & Transkrip Nilai (satu file PDF).</li>
                                <li><span class="font-semibold">Simpan Perubahan:</span> Pastikan untuk menyimpan data.</li>
                            </ol>
                        </div>
                    </div>
                </div>
                
                <div id="panel-pelatihan" class="content-panel bg-gray-900 text-gray-300 p-0 -m-6 md:-m-10">
                    <div class="flex h-full">
                        <!-- Inner Sidebar for Pelatihan -->
                        <aside class="w-64 bg-gray-800 text-gray-300 flex-col hidden md:flex">
                            <div class="h-16 flex items-center justify-center border-b border-gray-700">
                                <h1 class="text-xl font-bold text-white">Menu Pelatihan</h1>
                            </div>
                            <nav id="pelatihan-sidebar-nav" class="flex-1 px-4 py-4">
                                <a href="#pelatihan-kategori" class="pelatihan-sidebar-link flex items-center px-4 py-2.5 rounded-lg hover:bg-gray-700 transition-colors duration-200 pelatihan-sidebar-active">
                                    <i class="fas fa-tags w-6"></i>
                                    <span>Kategori Pelatihan</span>
                                </a>
                                <a href="#pelatihan-klasikal-nonklasikal" class="pelatihan-sidebar-link flex items-center px-4 py-2.5 mt-2 rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                    <i class="fas fa-layer-group w-6"></i>
                                    <span>Klasikal dan Non Klasikal</span>
                                </a>
                                <a href="#pelatihan-simulasi-simpeg" class="pelatihan-sidebar-link flex items-center px-4 py-2.5 mt-2 rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                    <i class="fas fa-laptop-code w-6"></i>
                                    <span>Simulasi Pengisian di SIMPEG</span>
                                </a>
                            </nav>
                        </aside>
                        <div class="flex-1 p-6 lg:p-10 overflow-y-auto">
                            <section id="pelatihan-kategori" class="pelatihan-content-section active">
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg">
                                    <h3 class="text-2xl font-bold text-white mb-4">1. Kategori Pelatihan</h3>
                                    <div class="prose max-w-none text-gray-400 space-y-4">
                                           <div class="p-4 border-l-4 border-blue-500 bg-blue-900/20 rounded-r-lg">
                                                <h4 class="font-bold text-lg text-blue-300">A. Pelatihan / Workshop</h4>
                                                <p>Termasuk semua diklat, pelatihan, workshop, bimbingan teknis (bimtek) baik daring maupun luring.</p>
                                                <div class="mt-3 p-3 bg-red-900/20 border-l-4 border-red-500 text-red-300 rounded-r-md"><p class="font-semibold">PERHATIAN: Jika pelatihan dilakukan secara daring dan memakai platform digital, masuk ke kategori E-Learning (Non-Klasikal).</p></div>
                                                <p class="mt-3">Sertifikat harus mencantumkan jumlah Jam Pelajaran (JP). Jika tidak, unggah juga:</p>
                                                <ul class="list-disc list-inside mt-1 space-y-1"><li>Tertib Acara / Rundown Acara untuk menghitung jumlah jam pelaksanaan.</li></ul>
                                           </div>
                                           <div class="p-4 border-l-4 border-green-500 bg-green-900/20 rounded-r-lg">
                                                <h4 class="font-bold text-lg text-green-300">B. Seminar / Webinar</h4>
                                                <p>Termasuk ke dalam pelatihan klasikal walaupun diselenggarakan secara daring. Tujuannya adalah pemberian wawasan/pengetahuan, bukan keterampilan langsung. Biasanya berdurasi singkat (beberapa jam – 1 hari).</p>
                                                <p class="mt-3">Sertifikat harus diunggah, dan bila tidak mencantumkan JP, bisa dihitung dari jadwal acara.</p>
                                           </div>
                                    </div>
                                </div>
                            </section>
                            <section id="pelatihan-klasikal-nonklasikal" class="pelatihan-content-section">
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg">
                                    <h3 class="text-2xl font-bold text-white mb-4">2. Penentuan Klasikal & Non Klasikal</h3>
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full border border-gray-700 rounded-lg"><thead class="bg-gray-700"><tr><th class="p-3 text-left font-semibold text-gray-300">Kategori</th><th class="p-3 text-left font-semibold text-gray-300">Jenis Kegiatan</th></tr></thead><tbody><tr class="border-t border-gray-700"><td class="p-3 font-medium text-cyan-300 bg-gray-900/20">Klasikal</td><td class="p-3 text-gray-400">Tatap muka, seminar/webinar, kursus, pelatihan langsung.</td></tr><tr class="border-t border-gray-700"><td class="p-3 font-medium text-purple-300 bg-gray-900/20">Non-Klasikal</td><td class="p-3 text-gray-400">E-learning, bimbingan kerja, pelatihan jarak jauh, magang, workshop daring.</td></tr></tbody></table>
                                    </div>
                                    <div class="mt-4 p-3 bg-amber-900/20 border-l-4 border-amber-500 text-amber-300 rounded-r-md"><p><strong class="font-semibold">Catatan:</strong> Sertifikat WEGO silakan diupload di SIMPEG, tetapi saat ini belum dapat dinilaikan di PARHATA, sampai dengan pemberitahuan lebih lanjut dengan SOP terbaru.</p></div>
                                </div>
                            </section>
                            <section id="pelatihan-simulasi-simpeg" class="pelatihan-content-section">
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg">
                                    <h3 class="text-2xl font-bold text-white mb-4">3. Simulasi Pengisian di SIMPEG</h3>
                                    <div class="overflow-x-auto"><table class="min-w-full border border-gray-700 rounded-lg"><thead class="bg-gray-700"><tr><th class="p-3 text-left font-semibold text-gray-300">Kolom</th><th class="p-3 text-left font-semibold text-gray-300">Panduan Pengisian</th></tr></thead><tbody><tr class="border-t border-gray-700"><td class="p-3 font-medium text-gray-300">Nama Diklat</td><td class="p-3 text-gray-400">Isi sesuai judul pada sertifikat.</td></tr><tr class="border-t border-gray-700 bg-gray-900/20"><td class="p-3 font-medium text-gray-300">Bentuk</td><td class="p-3 text-gray-400">Pilih <strong>Klasikal</strong> atau <strong>Non-Klasikal</strong>.</td></tr><tr class="border-t border-gray-700"><td class="p-3 font-medium text-gray-300">Kategori</td><td class="p-3 text-gray-400">Pilih yang paling sesuai: Pelatihan, Seminar, Workshop, Bimtek.</td></tr><tr class="border-t border-gray-700 bg-gray-900/20"><td class="p-3 font-medium text-gray-300">Durasi</td><td class="p-3 text-gray-400">Isi dalam satuan Jam Pelajaran (JP). Jika tidak ada, hitung dari rundown (1 JP = 45 menit).</td></tr><tr class="border-t border-gray-700"><td class="p-3 font-medium text-gray-300">Dokumen</td><td class="p-3 text-gray-400">Unggah file sertifikat. Jika JP tidak ada, unggah juga rundown acara.</td></tr></tbody></table></div>
                                       <div class="mt-12"><header class="text-center mb-6"><h3 class="text-2xl md:text-3xl font-bold text-white">Simulasi Tampilan Input di SIMPEG</h3><p class="text-md text-gray-400">Berikut adalah contoh pengisian data pelatihan di SIMPEG.</p></header><div class="border border-gray-700 bg-gray-900 rounded-lg shadow-lg max-w-2xl mx-auto"><div class="flex justify-between items-center p-3 bg-blue-600 text-white rounded-t-lg"><h4 class="font-bold">Detail Diklat</h4><button class="text-xl font-bold">&times;</button></div><div class="p-6 space-y-3 text-sm"><p class="text-center font-semibold text-gray-300 mb-4">KURSUS/PELATIHAN</p><div class="flex border-b border-gray-700 py-2"><p class="w-1/3 text-gray-400">Skala</p><p class="w-2/3 font-medium text-white">: Nasional</p></div><div class="flex border-b border-gray-700 py-2"><p class="w-1/3 text-gray-400">Bentuk</p><p class="w-2/3 font-medium text-white">: Klasikal</p></div><div class="flex border-b border-gray-700 py-2"><p class="w-1/3 text-gray-400">Kategori</p><p class="w-2/3 font-medium text-white">: Bimbingan teknis</p></div><div class="flex border-b border-gray-700 py-2"><p class="w-1/3 text-gray-400">Jenis</p><p class="w-2/3 font-medium text-white">: Pembelajaran</p></div><div class="flex border-b border-gray-700 py-2"><p class="w-1/3 text-gray-400">Nama Diklat</p><p class="w-2/3 font-medium text-white">: Training of Trainers Orientasi PPPK Tahun 2024</p></div><div class="flex border-b border-gray-700 py-2"><p class="w-1/3 text-gray-400">Mulai</p><p class="w-2/3 font-medium text-white">: 27-10-2024</p></div><div class="flex border-b border-gray-700 py-2"><p class="w-1/3 text-gray-400">Selesai</p><p class="w-2/3 font-medium text-white">: 01-11-2024</p></div><div class="flex border-b border-gray-700 py-2"><p class="w-1/3 text-gray-400">Durasi</p><p class="w-2/3 font-medium text-white">: 39 jam</p></div><div class="flex border-b border-gray-700 py-2"><p class="w-1/3 text-gray-400">Tempat</p><p class="w-2/3 font-medium text-white">: Pusdiklat BPS</p></div><div class="flex border-b border-gray-700 py-2"><p class="w-1/3 text-gray-400">Nomor Sertifikat</p><p class="w-2/3 font-medium text-white">: 0033/TEKNIS/4929/BPS/A/2024</p></div><div class="flex items-center py-2"><p class="w-1/3 text-gray-400">Dokumen</p><div class="w-2/3 flex items-center space-x-2"><span>:</span><select class="border border-gray-600 rounded p-1 w-full bg-gray-700 text-white"></select><button class="px-3 py-1 bg-gray-600 border border-gray-500 rounded text-xs text-white">Tambah Dokumen</button><button class="px-3 py-1 bg-gray-600 border border-gray-500 rounded text-xs text-white">Upload</button></div></div></div><div class="flex justify-end p-3 bg-gray-700 rounded-b-lg"><button class="px-4 py-2 bg-blue-500 text-white rounded shadow hover:bg-blue-600"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z" /></svg>Ubah</button></div></div></div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>

                <div id="panel-seminar" class="content-panel">
                    <h2 class="text-3xl font-bold content-title text-slate-800 mb-6">SOP Riwayat Seminar</h2>
                    <div class="bg-white p-8 rounded-xl shadow-md">
                        <div class="flex items-start gap-6">
                            <div class="bg-indigo-100 text-indigo-600 p-4 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 8-8 5 8 5 8-5-8-5z"></path><path d="M20 13v4c0 1.1-.9 2-2 2H6a2 2 0 0 1-2-2v-4"></path><path d="m4 13 8 5 8-5"></path></svg>
                            </div>
                            <div>
                                <h3 class="text-2xl font-bold text-slate-800">Periksa & Tambah Riwayat Seminar</h3>
                                <p class="text-slate-600 mt-1">Proses sama dengan Riwayat Pelatihan.</p>
                            </div>
                        </div>
                           <div class="mt-8 border-t pt-6 grid md:grid-cols-2 gap-8">
                                <div>
                                    <h4 class="font-bold text-lg text-slate-700 mb-4">1. Periksa Data Otomatis</h4>
                                    <ul class="list-disc list-inside space-y-2 text-slate-600">
                                        <li>Tinjau data seminar dari SIMPEG.</li>
                                        <li>Verifikasi kesesuaian dan relevansi.</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg text-slate-700 mb-4">2. Input Manual Data Baru</h4>
                                    <ul class="list-disc list-inside space-y-2 text-slate-600">
                                        <li>Input seminar yang belum tercatat.</li>
                                        <li>Unggah bukti dukung (sertifikat/materi) PDF.</li>
                                    </ul>
                                </div>
                            </div>
                    </div>
                </div>

                <!-- Panel Riwayat Sertifikasi (Updated) -->
                <div id="panel-sertifikasi" class="content-panel bg-gray-900 text-gray-300 p-0 -m-6 md:-m-10">
                    <div class="flex h-full">
                        <!-- Inner Sidebar for Sertifikasi -->
                        <aside class="w-64 bg-gray-800 text-gray-300 flex-col hidden md:flex">
                            <div class="h-16 flex items-center justify-center border-b border-gray-700">
                                <h1 class="text-xl font-bold text-white">Menu Sertifikasi</h1>
                            </div>
                            <nav id="sertifikasi-sidebar-nav" class="flex-1 px-4 py-4">
                                <a href="#sertifikasi-panduan-umum" class="sertifikasi-sidebar-link flex items-center px-4 py-2.5 rounded-lg hover:bg-gray-700 transition-colors duration-200 sertifikasi-sidebar-active">
                                    <i class="fas fa-book-open w-6"></i>
                                    <span>Panduan Umum</span>
                                </a>
                                <a href="#sertifikasi-riwayat" class="sertifikasi-sidebar-link flex items-center px-4 py-2.5 mt-2 rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                    <i class="fas fa-history w-6"></i>
                                    <span>Riwayat Sertifikasi</span>
                                </a>
                                <a href="#sertifikasi-simulasi" class="sertifikasi-sidebar-link flex items-center px-4 py-2.5 mt-2 rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                    <i class="fas fa-edit w-6"></i>
                                    <span>Simulasi & Pengisian</span>
                                </a>
                            </nav>
                        </aside>
                           <!-- Inner Content for Sertifikasi -->
                        <div class="flex-1 p-6 lg:p-10 overflow-y-auto">
                            <!-- Panduan Umum Portofolio Sertifikasi -->
                            <section id="sertifikasi-panduan-umum" class="sertifikasi-content-section active">
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg mb-8">
                                    <h3 class="text-2xl font-bold text-white mb-4">Panduan Umum Portofolio Sertifikasi</h3>
                                    <p class="text-gray-400 mb-4">Selamat datang di modul Portofolio Riwayat Sertifikasi. Modul ini bertujuan untuk mendokumentasikan dan menilai rekam jejak sertifikasi Anda secara sistematis.</p>

                                    <h4 class="text-xl font-semibold text-blue-400 mt-6 mb-3">Tujuan Pengisian</h4>
                                    <p class="text-gray-400">Pengisian portofolio ini penting untuk keperluan manajemen talenta, pengembangan karir, dan proses seleksi. Data yang akurat dan lengkap akan membantu sistem dalam memberikan penilaian yang objektif.</p>

                                    <h4 class="text-xl font-semibold text-blue-400 mt-6 mb-3">Dasar Hukum</h4>
                                    <p class="text-gray-400">Pengelolaan data dan penilaian sertifikasi didasarkan pada peraturan yang berlaku terkait sertifikasi profesional dan pengembangan kompetensi.</p>

                                    <h4 class="text-xl font-semibold text-blue-400 mt-6 mb-3">Sinkronisasi Data</h4>
                                    <p class="text-gray-400">Perlu diketahui bahwa beberapa data sertifikasi Anda mungkin ditarik secara otomatis dari sistem terkait. Sinkronisasi ini dilakukan oleh sistem PARHATA secara berkala. Pastikan data Anda selalu ter-update.</p>
                                </div>
                            </section>

                            <!-- Riwayat Sertifikasi Section -->
                            <section id="sertifikasi-riwayat" class="sertifikasi-content-section">
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg mb-8">
                                    <h3 class="text-2xl font-bold text-white mb-4">Riwayat Sertifikasi</h3>
                                    <div class="info-box bg-blue-900/20 border-blue-500 text-blue-300">
                                        <p class="font-bold">Informasi Penting!</p>
                                        <!-- Updated narrative text -->
                                        <span class="block sm:inline ml-2">Data awal ditarik dari SIMPEG. Klik tombol <b class="text-yellow-400">Lengkapi</b> untuk mengisi data Relevansi dan Tipe Sertifikasi.</span>
                                    </div>

                                    <div class="flex flex-wrap items-center justify-between mb-4">
                                        <div class="filter-buttons flex flex-wrap mb-2 md:mb-0">
                                            <button class="bg-gray-700 text-white px-4 py-2 rounded-lg text-sm active" data-filter="all">Semua <span id="count-all">0</span></button>
                                            <button class="bg-gray-900 text-gray-400 px-4 py-2 rounded-lg text-sm ml-2" data-filter="disetujui">Disetujui <span id="count-disetujui">0</span></button>
                                            <button class="bg-gray-900 text-gray-400 px-4 py-2 rounded-lg text-sm ml-2" data-filter="ditolak">Ditolak <span id="count-ditolak">0</span></button>
                                            <button class="bg-gray-900 text-gray-400 px-4 py-2 rounded-lg text-sm ml-2" data-filter="diajukan">Diajukan <span id="count-diajukan">0</span></button>
                                        </div>
                                        <input type="text" id="search-sertifikasi" placeholder="Search" class="search-input mb-2 md:mb-0 bg-gray-700 text-white border-gray-600">
                                    </div>

                                    <div class="flex justify-end mb-4 view-toggle-buttons">
                                        <button id="toggle-table-view" class="active bg-blue-600 text-white hover:bg-blue-700">Tampilan Tabel</button>
                                        <button id="toggle-card-view" class="bg-gray-700 text-gray-300 hover:bg-gray-600">Tampilan Kartu</button>
                                    </div>

                                    <div id="table-view" class="table-container">
                                        <table class="data-table bg-gray-800 text-gray-300" id="sertifikasi-table">
                                            <thead>
                                                <tr>
                                                    <th>Nama Sertifikasi</th>
                                                    <th>Tingkat Sertifikasi</th>
                                                    <th>Relevansi</th>
                                                    <th>Jenis Tingkat</th>
                                                    <th>Tipe Sertifikasi</th>
                                                    <th>Bukti Sertifikasi</th>
                                                    <th>Status</th>
                                                    <th>Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Data sertifikasi akan dimuat di sini -->
                                            </tbody>
                                        </table>
                                    </div>

                                    <div id="card-view" class="card-container" style="display: none;">
                                        <!-- Data sertifikasi dalam bentuk kartu akan dimuat di sini -->
                                    </div>

                                    <p id="no-data-message" class="text-center text-gray-500 mt-4" style="display: none;">Belum ada riwayat sertifikasi. Klik "Buat Riwayat Sertifikasi"</p>

                                    <div class="flex justify-end mt-6">
                                        <button id="create-riwayat-button" class="button-primary bg-blue-600 hover:bg-blue-700 text-white">Buat Riwayat Sertifikasi</button>
                                    </div>
                                </div>
                            </section>

                            <!-- Simulasi & Pengisian Section -->
                            <section id="sertifikasi-simulasi" class="sertifikasi-content-section">
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg">
                                    <h3 class="text-2xl font-bold text-white mb-4">Simulasi & Pengisian Sertifikasi</h3>
                                    <p class="text-gray-400">Silakan isi detail sertifikasi Anda di bawah ini.</p>

                                    <form id="sertifikasi-form" class="mt-6">
                                        <div class="form-group">
                                            <label for="nama-sertifikasi" class="text-gray-300">Nama Sertifikasi<span class="text-red-500">*</span></label>
                                            <input type="text" id="nama-sertifikasi" placeholder="Ketik nama sertifikasinya" required class="bg-gray-700 text-white border-gray-600">
                                        </div>

                                        <div class="grid-cols-2">
                                            <div class="form-group">
                                                <label for="tingkat-sertifikasi" class="text-gray-300">Tingkat Sertifikasi<span class="text-red-500">*</span></label>
                                                <select id="tingkat-sertifikasi" required class="bg-gray-700 text-white border-gray-600">
                                                    <option value="">Pilih Tingkat</option>
                                                    <option value="Dasar">Dasar</option>
                                                    <option value="Menengah">Menengah</option>
                                                    <option value="Profesional">Profesional</option>
                                                </select>
                                                <!-- New element for narrative explanation -->
                                                <p id="tingkat-sertifikasi-narrative" class="narrative-explanation text-gray-400"></p>
                                                <p class="text-sm text-gray-400 mt-1">Silakan pilih tingkat sertifikasi.</p>
                                            </div>

                                            <div class="form-group">
                                                <label for="relevansi-sertifikasi" class="text-gray-300">Relevansi Sertifikasi<span class="text-red-500">*</span></label>
                                                <select id="relevansi-sertifikasi" required class="bg-gray-700 text-white border-gray-600">
                                                    <option value="">Pilih Relevansi</option>
                                                    <option value="Sangat Relevan">Sangat Relevan</option>
                                                    <option value="Sebagian Relevan">Sebagian Relevan</option>
                                                    <option value="Tidak Relevan">Tidak Relevan</option>
                                                </select>
                                                <p class="text-sm text-gray-400 mt-1">Silakan pilih relevansi sertifikasi dengan pekerjaan Anda.</p>
                                            </div>
                                        </div>

                                        <div class="grid-cols-2">
                                            <div class="form-group">
                                                <label for="tingkat-sertifikasi-lainnya" class="text-gray-300">Tingkat Sertifikasi Lainnya<span class="text-red-500">*</span></label>
                                                <select id="tingkat-sertifikasi-lainnya" required class="bg-gray-700 text-white border-gray-600">
                                                    <option value="">Pilih Tingkat</option>
                                                    <option value="Nasional">Nasional</option>
                                                    <option value="Internasional">Internasional</option>
                                                </select>
                                                <p class="text-sm text-gray-400 mt-1">Silakan pilih tingkat sertifikasi (misal: Nasional, Internasional).</p>
                                            </div>

                                            <div class="form-group">
                                                <label for="jenis-sertifikasi" class="text-gray-300">Jenis Sertifikasi<span class="text-red-500">*</span></label>
                                                <!-- Updated placeholder text -->
                                                <input type="text" id="jenis-sertifikasi" list="jenis-sertifikasi-options" placeholder="Ketik manual: PPK, Bendahara, PPSPM, PBJ, Lainnya" required class="bg-gray-700 text-white border-gray-600">
                                                <!-- Datalist for suggestions -->
                                                <datalist id="jenis-sertifikasi-options">
                                                    <option value="PBJ">
                                                    <option value="Bendahara">
                                                    <option value="PPK">
                                                    <option value="PPSPM">
                                                    <option value="Lainnya">
                                                </datalist>
                                            </div>
                                        </div>

                                        <div class="flex justify-end space-x-4 mt-6">
                                            <button type="button" id="cancel-form-button" class="button-secondary bg-gray-600 hover:bg-gray-700 text-white">Batal</button>
                                            <button type="submit" class="button-primary bg-blue-600 hover:bg-blue-700 text-white">Simpan Riwayat Sertifikasi</button>
                                        </div>
                                    </form>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>

                <!-- Panel Penilaian Pencapaian Kinerja -->
                <div id="panel-kinerja" class="content-panel bg-gray-900 text-gray-300 p-0 -m-6 md:-m-10">
                    <div class="flex h-full">
                        <!-- Inner Sidebar for Kinerja -->
                        <aside class="w-64 bg-gray-800 text-gray-300 flex-col hidden md:flex">
                            <div class="h-16 flex items-center justify-center border-b border-gray-700">
                                <h1 class="text-xl font-bold text-white">Menu Kinerja</h1>
                            </div>
                            <nav id="kinerja-sidebar-nav" class="flex-1 px-4 py-4">
                                <a href="#kinerja-panduan-umum" class="kinerja-sidebar-link flex items-center px-4 py-2.5 rounded-lg hover:bg-gray-700 transition-colors duration-200 kinerja-sidebar-active">
                                    <i class="fas fa-book-open w-6"></i>
                                    <span>Panduan Umum</span>
                                </a>
                                <a href="#kinerja-bukti-fisik" class="kinerja-sidebar-link flex items-center px-4 py-2.5 mt-2 rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                    <i class="fas fa-file-alt w-6"></i>
                                    <span>Bukti Fisik</span>
                                </a>
                                <a href="#kinerja-panduan-peran-khusus" class="kinerja-sidebar-link flex items-center px-4 py-2.5 mt-2 rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                    <i class="fas fa-users-cog w-6"></i>
                                    <span>Panduan Peran Khusus</span>
                                </a>
                                <a href="#kinerja-simulasi" class="kinerja-sidebar-link flex items-center px-4 py-2.5 mt-2 rounded-lg hover:bg-gray-700 transition-colors duration-200">
                                    <i class="fas fa-flask w-6"></i>
                                    <span>Simulasi Pengisian</span>
                                </a>
                            </nav>
                        </aside>
                        <!-- Inner Content for Kinerja -->
                        <div class="flex-1 p-6 lg:p-10 overflow-y-auto">
                            <!-- Panduan Umum Kinerja Section -->
                            <section id="kinerja-panduan-umum" class="kinerja-content-section active">
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg text-center">
                                    <h2 class="text-3xl font-bold text-white mb-4">Memahami Pengisian Porfofolio Penilaian Kinerja</h2>
                                    <p class="text-lg text-gray-400 max-w-3xl mx-auto mb-8">Selamat datang! Panduan ini dirancang untuk mempermudah Anda memahami proses pengisian portofolio penilaian kinerja. Bukti yang dapat dinilai adalah sejak tahun 2023 ke atas.</p>
                                    <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-8">
                                        <div class="flex items-center flex-col p-4">
                                            <div class="bg-[#A9C5A0] text-white rounded-full h-16 w-16 flex items-center justify-center text-2xl font-bold">1</div>
                                            <h3 class="mt-4 font-semibold text-xl text-white">Identifikasi Pencapaian</h3>
                                            <p class="text-gray-400 mt-1">Kenali tugas & proyek Anda.</p>
                                        </div>
                                        <div class="text-2xl text-gray-500 hidden md:block">➔</div>
                                        <div class="flex items-center flex-col p-4">
                                            <div class="bg-[#A9C5A0] text-white rounded-full h-16 w-16 flex items-center justify-center text-2xl font-bold">2</div>
                                            <h3 class="mt-4 font-semibold text-xl text-white">Kumpulkan Bukti Fisik</h3>
                                            <p class="text-gray-400 mt-1">Siapkan dokumen pendukung.</p>
                                        </div>
                                        <div class="text-2xl text-gray-500 hidden md:block">➔</div>
                                        <div class="flex items-center flex-col p-4">
                                            <div class="bg-[#A9C5A0] text-white rounded-full h-16 w-16 flex items-center justify-center text-2xl font-bold">3</div>
                                            <h3 class="mt-4 font-semibold text-xl text-white">Isi Portofolio</h3>
                                            <p class="text-gray-400 mt-1">Sajikan data secara akurat.</p>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <!-- Bukti Fisik Section -->
                            <section id="kinerja-bukti-fisik" class="kinerja-content-section">
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg">
                                    <h2 class="text-3xl font-bold text-white mb-2 text-center">Jelajahi Jenis Bukti Fisik</h2>
                                    <p class="text-lg text-gray-400 text-center max-w-3xl mx-auto mb-10">Klik setiap kategori untuk melihat contoh dokumen yang dapat Anda gunakan sebagai bukti pencapaian kinerja.</p>
                                    <div id="evidence-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    </div>
                                </div>
                            </section>
                            <!-- Panduan Peran Khusus Section -->
                            <section id="kinerja-panduan-peran-khusus" class="kinerja-content-section">
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg">
                                    <h2 class="text-3xl font-bold text-white mb-2 text-center">Panduan untuk Peran Khusus</h2>
                                    <p class="text-lg text-gray-400 text-center max-w-3xl mx-auto mb-10">Apakah Anda seorang Ketua Tim, Anggota Tim, Pengelola Keuangan, Pejabat Pengadaan, atau pernah bertindak sebagai Pelaksana Tugas (Plt.)? Pilih peran Anda di bawah ini untuk melihat panduan pengisian yang spesifik.</p>
                                    
                                    <div class="max-w-3xl mx-auto bg-gray-900 rounded-xl shadow-lg p-6 space-y-4">
                                        <label for="role-selector" class="block text-sm font-medium text-gray-300 mb-2">Pilih Peran:</label>
                                        <select id="role-selector" class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-[#A9C5A0] focus:border-[#A9C5A0]">
                                            <option value="">-- Pilih Peran --</option>
                                            <option value="ketua_tim">Pengelola Tim (Ketua Tim)</option>
                                            <option value="anggota_tim">Anggota Tim</option>
                                            <option value="pengelola_keuangan">Jabatan Pengelola Keuangan (Bendahara, PPK, PPSPM, PBJ)</option>
                                            <option value="plt">Pelaksana Tugas (Plt.)</option>
                                        </select>
                                        <div id="role-explanation-box" class="explanation-box">
                                            <!-- Explanation content will be loaded here -->
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <!-- Simulasi Pengisian Section -->
                            <section id="kinerja-simulasi" class="kinerja-content-section">
                                <div class="bg-gray-800 p-8 rounded-xl shadow-lg">
                                    <h2 class="text-3xl font-bold text-white mb-2 text-center">Simulasi Pengisian Portofolio</h2>
                                    <p class="text-lg text-gray-400 text-center max-w-3xl mx-auto mb-10">Panduan mengisi formulir pencapaian kinerja di aplikasi PARHATA. Pilih skenario di bawah ini untuk melihat contoh pengisiannya secara otomatis.</p>
                                    <div class="max-w-4xl mx-auto bg-gray-900 rounded-xl shadow-lg p-8 text-white">
                                        <div class="mb-6">
                                            <label for="scenario-selector" class="block text-sm font-medium text-gray-300 mb-2">Pilih Skenario Pengisian:</label>
                                            <select id="scenario-selector" class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-[#A9C5A0] focus:border-[#A9C5A0]">
                                                <option value="ketua_tim">Ketua Tim Proyek (Contoh: Tim Podcast)</option>
                                                <option value="anggota_tim">Anggota Tim Proyek (Contoh: Tim Podcast)</option>
                                                <option value="bendahara">Jabatan Pengelola Keuangan (Contoh: Bendahara)</option>
                                                <option value="plt">Pelaksana Tugas (Contoh: Plt. Kepala Seksi)</option>
                                            </select>
                                        </div>
                                        <div class="bg-gray-900 p-6 rounded-lg mb-6">
                                            <div class="flex items-center mb-4">
                                                <span class="text-xl mr-2">🏆</span>
                                                <h3 class="font-bold text-xl text-gray-100">Pencapaian Kinerja</h3>
                                            </div>
                                            <p class="text-sm text-gray-400 mb-6">Isi informasi pencapaian kinerja yang telah dicapai.</p>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <div>
                                                    <label for="nama-pencapaian" class="block text-sm font-medium text-gray-300 mb-2">Nama Pencapaian<span class="text-red-500">*</span></label>
                                                    <input type="text" id="nama-pencapaian" class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white placeholder-gray-400 focus:ring-2 focus:ring-[#A9C5A0] focus:border-[#A9C5A0]" placeholder="Isi nama pencapaian">
                                                </div>
                                                <div>
                                                    <label for="pencapaian-kinerja" class="block text-sm font-medium text-gray-300 mb-2">Pencapaian Kinerja<span class="text-red-500">*</span></label>
                                                    <select id="pencapaian-kinerja" class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-[#A9C5A0] focus:border-[#A9C5A0]">
                                                        <option value="">Select an option</option>
                                                        <option value="dibawah_ekspektasi">Dibawah Ekspektasi</option>
                                                        <option value="sesuai_ekspektasi">Sesuai Ekspektasi</option>
                                                        <option value="diatas_ekspektasi">Diatas Ekspektasi</option>
                                                    </select>
                                                    <p class="text-xs text-gray-400 mt-1">Silakan pilih pencapaian kinerja</p>
                                                </div>
                                                <div>
                                                    <label for="penghargaan" class="block text-sm font-medium text-gray-300 mb-2">Penghargaan<span class="text-red-500">*</span></label>
                                                    <select id="penghargaan" class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-[#A9C5A0] focus:border-[#A9C5A0]">
                                                        <option value="">Select an option</option>
                                                        <option value="tidak_ada">Tidak ada Penghargaan</option>
                                                        <option value="internal_lokal">Penghargaan Tingkat Internal/Lokal</option>
                                                        <option value="nasional_internasional">Penghargaan Tingkat Nasional/Internasional</option>
                                                    </select>
                                                    <p class="text-xs text-gray-400 mt-1">Silakan pilih penghargaan</p>
                                                </div>
                                                <div>
                                                    <label for="dampak-kontribusi" class="block text-sm font-medium text-gray-300 mb-2">Dampak Kontribusi<span class="text-red-500">*</span></label>
                                                    <select id="dampak-kontribusi" class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-[#A9C5A0] focus:border-[#A9C5A0]">
                                                        <option value="">Select an option</option>
                                                        <option value="rendah">Dampak Rendah</option>
                                                        <option value="sedang">Dampak Sedang</option>
                                                        <option value="tinggi">Dampak Tinggi</option>
                                                    </select>
                                                    <p class="text-xs text-gray-400 mt-1">Silakan pilih dampak kontribusi</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-gray-900 p-6 rounded-lg">
                                            <div class="flex items-center mb-4">
                                                <span class="text-xl mr-2">📄</span>
                                                <h3 class="font-bold text-xl text-gray-100">Bukti Pencapaian</h3>
                                            </div>
                                            <p class="text-sm text-gray-400 mb-6">Unggah bukti pencapaian dalam format PDF.</p>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-300 mb-2">Bukti (PDF)</label>
                                                <div class="border border-dashed border-gray-600 rounded-lg p-6 text-center text-gray-400">
                                                    Drag & Drop your files or <span class="text-[#A9C5A0] cursor-pointer">Browse</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="mt-16 py-8 border-t border-slate-200">
                <div class="max-w-4xl mx-auto text-center text-slate-500">
                       <p class="text-sm mb-4">SOP digital ini dibuat sebagai panduan pengisian portofolio di PARHATA.</p>
                       <p class="text-sm">
                           © 2024 Tim Layanan Pengembangan Kompetensi dan Hukum
                           <br>
                           BPS Provinsi Sumatera Utara
                       </p>
                </div>
            </footer>
        </main>
    </div>

    <!-- Modal Structure for Kinerja -->
    <div id="infoModal" class="modal-overlay">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h4 id="modalTitle" class="text-xl font-bold"></h4>
                <button id="closeModal" class="text-gray-400 hover:text-gray-200 text-2xl leading-none">&times;</button>
            </div>
            <p id="modalBody" class="text-gray-300"></p>
        </div>
    </div>
    
    <!-- Modal Structure for General Info -->
    <div id="info-modal-general" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 opacity-0" style="visibility: hidden;">
        <div class="info-modal-content bg-white rounded-lg shadow-xl w-full max-w-md p-6 mx-auto transform scale-95">
            <div class="flex justify-between items-start mb-4">
                <h3 id="modal-title-general" class="text-xl font-bold text-slate-900"></h3>
                <button id="modal-close-button-general" class="text-slate-500 hover:text-slate-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <p id="modal-info-general" class="text-slate-700"></p>
        </div>
    </div>
    
    <!-- Modal for "Lengkapi" -->
    <div id="lengapi-modal" class="modal">
        <div class="modal-content bg-gray-800 text-gray-200">
            <span class="close-button" id="close-lengapi-modal">&times;</span>
            <h2 class="text-2xl font-bold mb-4">Lengkapi Data Sertifikasi</h2>
            <form id="lengapi-form">
                <input type="hidden" id="lengapi-sertifikasi-id">
                <div class="form-group">
                    <label for="lengapi-relevansi" class="text-gray-300">Relevansi Sertifikasi<span class="text-red-500">*</span></label>
                    <select id="lengapi-relevansi" required class="bg-gray-700 border border-gray-600 text-white">
                        <option value="">Pilih Relevansi</option>
                        <option value="Sangat Relevan">Sangat Relevan</option>
                        <option value="Sebagian Relevan">Sebagian Relevan</option>
                        <option value="Tidak Relevan">Tidak Relevan</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="lengapi-tipe" class="text-gray-300">Tipe Sertifikasi<span class="text-red-500">*</span></label>
                    <input type="text" id="lengapi-tipe" placeholder="Ketik tipe sertifikasinya" required class="bg-gray-700 border border-gray-600 text-white">
                </div>
                <div class="flex justify-end space-x-4 mt-6">
                    <button type="button" class="button-secondary bg-gray-600 hover:bg-gray-700 text-white" id="cancel-lengapi-modal">Batal</button>
                    <button type="submit" class="button-primary bg-blue-600 hover:bg-blue-700 text-white">Simpan</button>
                </div>
            </form>
        </div>
    </div>


    <script type="module">
        // Inisialisasi Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, addDoc, setDoc, updateDoc, deleteDoc, onSnapshot, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Variabel global dari lingkungan Canvas
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let app;
        let db;
        let auth;
        let userId = null;

        // Data sertifikasi yang diambil dari Firestore
        let allCertifications = [];
        // Data sertifikasi yang sedang ditampilkan (setelah filter/search)
        let displayedCertifications = [];
        // Status filter saat ini ('all', 'disetujui', 'ditolak', 'diajukan')
        let currentFilterStatus = 'all';
        // Teks pencarian saat ini
        let currentSearchText = '';
        // Tampilan saat ini ('table' atau 'card')
        let currentView = 'table';

        // Narasi untuk tingkat sertifikasi
        const tingkatSertifikasiNarratives = {
            "Dasar": "Sertifikasi pemula atau pengantar, biasanya tanpa prasyarat.",
            "Menengah": "Sertifikasi lanjutan yang mensyaratkan pengalaman atau pelatihan sebelumnya.",
            "Profesional": "Sertifikasi tingkat tinggi, seringkali diakui secara global dan memerlukan pengalaman profesional."
        };

        // Inisialisasi Firebase dan autentikasi
        const initFirebase = async () => {
            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                // Autentikasi pengguna
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("User authenticated:", userId);
                        // Mulai mendengarkan perubahan data setelah autentikasi
                        setupRealtimeListener();
                    } else {
                        console.log("No user is signed in.");
                        userId = null;
                        // Handle case where user signs out or authentication fails
                    }
                });

            } catch (error) {
                console.error("Error initializing Firebase:", error);
            }
        };

        // Fungsi untuk mengatur listener realtime dari Firestore
        const setupRealtimeListener = () => {
            if (!db || !userId) {
                console.warn("Firestore or userId not available for listener setup.");
                return;
            }

            const certificationsCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/certifications`);

            onSnapshot(certificationsCollectionRef, (snapshot) => {
                const fetchedCertifications = [];
                snapshot.forEach((doc) => {
                    fetchedCertifications.push({ id: doc.id, ...doc.data() });
                });
                allCertifications = fetchedCertifications; // Simpan semua data
                filterAndSearchCertifications(); // Terapkan filter dan pencarian setelah data baru
                updateFilterCounts(allCertifications);
            }, (error) => {
                console.error("Error fetching real-time certifications:", error);
            });
        };

        // Fungsi untuk merender data sertifikasi ke tabel atau kartu
        function renderCertifications(data) {
            const tableBody = document.querySelector('#sertifikasi-table tbody');
            const cardsContainer = document.getElementById('card-view');
            tableBody.innerHTML = ''; // Bersihkan tabel
            cardsContainer.innerHTML = ''; // Bersihkan kartu
            const noDataMessage = document.getElementById('no-data-message');

            if (data.length === 0) {
                noDataMessage.style.display = 'block';
                document.getElementById('table-view').style.display = 'none';
                document.getElementById('card-view').style.display = 'none';
                return;
            } else {
                noDataMessage.style.display = 'none';
            }

            // Render ke tabel
            data.forEach(cert => {
                const row = tableBody.insertRow();
                row.innerHTML = `
                    <td>${cert.namaSertifikasi}</td>
                    <td>${cert.tingkatSertifikasi}</td>
                    <td>${cert.relevansi || 'N/A'}</td>
                    <td>${cert.tingkatSertifikasiLainnya}</td>
                    <td>${cert.tipeSertifikasi || 'N/A'}</td>
                    <td>
                        ${cert.buktiSertifikasiUrl ? `<a href="${cert.buktiSertifikasiUrl}" target="_blank" class="text-blue-400 hover:underline">Unduh</a>` : 'Tidak Ada'}
                    </td>
                    <td><span class="status-badge ${cert.status.toLowerCase()}">${cert.status}</span></td>
                    <td class="action-links">
                        ${(cert.relevansi === undefined || cert.relevansi === '' || cert.tipeSertifikasi === undefined || cert.tipeSertifikasi === '') ?
                            `<button class="lengapi-button" data-id="${cert.id}">Lengkapi</button>` : ''}
                        <button class="hapus-button" data-id="${cert.id}">Hapus</button>
                    </td>
                `;
            });

            // Render ke kartu
            data.forEach(cert => {
                const card = document.createElement('div');
                card.className = 'certification-card bg-gray-800 text-gray-200';
                const narrative = tingkatSertifikasiNarratives[cert.tingkatSertifikasi] || 'Tidak ada narasi.';
                card.innerHTML = `
                    <h3 class="text-white">${cert.namaSertifikasi}</h3>
                    <p><strong>Tingkat:</strong> ${cert.tingkatSertifikasi}</p>
                    <p><strong>Relevansi:</strong> ${cert.relevansi || 'N/A'}</p>
                    <p><strong>Jenis Tingkat:</strong> ${cert.tingkatSertifikasiLainnya}</p>
                    <p><strong>Tipe:</strong> ${cert.tipeSertifikasi || 'N/A'}</p>
                    <p><strong>Status:</strong> <span class="status-badge ${cert.status.toLowerCase()}">${cert.status}</span></p>
                    <p class="level-narrative">${narrative}</p>
                    <div class="card-actions">
                        ${(cert.relevansi === undefined || cert.relevansi === '' || cert.tipeSertifikasi === undefined || cert.tipeSertifikasi === '') ?
                            `<button class="button-primary button-small lengapi-button" data-id="${cert.id}">Lengkapi</button>` : ''}
                        <button class="button-secondary button-small hapus-button" data-id="${cert.id}">Hapus</button>
                        ${cert.buktiSertifikasiUrl ? `<a href="${cert.buktiSertifikasiUrl}" target="_blank" class="button-primary button-small">Unduh Bukti</a>` : ''}
                    </div>
                `;
                cardsContainer.appendChild(card);
            });

            // Tambahkan event listener untuk tombol "Lengkapi" dan "Hapus" di tabel dan kartu
            document.querySelectorAll('.lengapi-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const certId = e.target.dataset.id;
                    openLengapiModal(certId);
                });
            });

            document.querySelectorAll('.hapus-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const certId = e.target.dataset.id;
                    showConfirmationModal("Apakah Anda yakin ingin menghapus riwayat sertifikasi ini?", () => deleteCertification(certId));
                });
            });

            // Atur tampilan berdasarkan currentView
            if (currentView === 'table') {
                document.getElementById('table-view').style.display = 'block';
                document.getElementById('card-view').style.display = 'none';
            } else {
                document.getElementById('table-view').style.display = 'none';
                document.getElementById('card-view').style.display = 'grid'; // Use grid for cards
            }
        }

        // Fungsi untuk memperbarui jumlah di tombol filter
        function updateFilterCounts(data) {
            const counts = {
                all: data.length,
                disetujui: data.filter(cert => cert.status.toLowerCase() === 'disetujui').length,
                ditolak: data.filter(cert => cert.status.toLowerCase() === 'ditolak').length,
                diajukan: data.filter(cert => cert.status.toLowerCase() === 'diajukan').length,
            };

            document.getElementById('count-all').textContent = counts.all;
            document.getElementById('count-disetujui').textContent = counts.disetujui;
            document.getElementById('count-ditolak').textContent = counts.ditolak;
            document.getElementById('count-diajukan').textContent = counts.diajukan;
        }

        // Fungsi untuk memfilter dan mencari data sertifikasi
        function filterAndSearchCertifications() {
            let filtered = allCertifications;

            // Filter berdasarkan status
            if (currentFilterStatus !== 'all') {
                filtered = filtered.filter(cert => cert.status.toLowerCase() === currentFilterStatus);
            }

            // Cari berdasarkan nama sertifikasi
            if (currentSearchText) {
                filtered = filtered.filter(cert =>
                    cert.namaSertifikasi.toLowerCase().includes(currentSearchText.toLowerCase())
                );
            }
            displayedCertifications = filtered;
            renderCertifications(displayedCertifications);
        }

        // Fungsi untuk menyimpan sertifikasi baru ke Firestore
        async function saveCertification(certData) {
            if (!db || !userId) {
                console.error("Firestore or userId not initialized.");
                return;
            }
            try {
                const docRef = await addDoc(collection(db, `artifacts/${appId}/users/${userId}/certifications`), certData);
                console.log("Dokumen sertifikasi berhasil ditulis dengan ID: ", docRef.id);
                // After saving, switch to the certification history view
                switchSertifikasiView('#sertifikasi-riwayat'); // Switch to Riwayat Sertifikasi
                document.getElementById('sertifikasi-form').reset(); // Reset form
            } catch (e) {
                console.error("Error menambahkan dokumen sertifikasi: ", e);
            }
        }

        // Fungsi untuk memperbarui sertifikasi di Firestore
        async function updateCertification(id, updateData) {
            if (!db || !userId) {
                console.error("Firestore or userId not initialized.");
                return;
            }
            try {
                const certRef = doc(db, `artifacts/${appId}/users/${userId}/certifications`, id);
                await updateDoc(certRef, updateData);
                console.log("Dokumen sertifikasi berhasil diperbarui.");
            } catch (e) {
                console.error("Error memperbarui dokumen sertifikasi: ", e);
            }
        }

        // Fungsi untuk menghapus sertifikasi dari Firestore
        async function deleteCertification(id) {
            if (!db || !userId) {
                console.error("Firestore or userId not initialized.");
                return;
            }
            try {
                await deleteDoc(doc(db, `artifacts/${appId}/users/${userId}/certifications`, id));
                console.log("Dokumen sertifikasi berhasil dihapus.");
            } catch (e) {
                console.error("Error menghapus dokumen sertifikasi: ", e);
            }
        }

        // Modal Logic for Lengkapi
        const lengapiModal = document.getElementById('lengapi-modal');
        const closeLengapiModalButton = document.getElementById('close-lengapi-modal');
        const cancelLengapiModalButton = document.getElementById('cancel-lengapi-modal');
        const lengapiForm = document.getElementById('lengapi-form');

        function openLengapiModal(certId) {
            document.getElementById('lengapi-sertifikasi-id').value = certId;
            const cert = allCertifications.find(c => c.id === certId);
            if (cert) {
                document.getElementById('lengapi-relevansi').value = cert.relevansi || '';
                document.getElementById('lengapi-tipe').value = cert.tipeSertifikasi || '';
            }
            lengapiModal.style.display = 'flex';
        }

        if(closeLengapiModalButton) closeLengapiModalButton.onclick = function() {
            lengapiModal.style.display = 'none';
        }

        if(cancelLengapiModalButton) cancelLengapiModalButton.onclick = function() {
            lengapiModal.style.display = 'none';
        }

        window.onclick = function(event) {
            if (event.target == lengapiModal) {
                lengapiModal.style.display = 'none';
            }
        }

        if(lengapiForm) {
            lengapiForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const certId = document.getElementById('lengapi-sertifikasi-id').value;
                const relevansi = document.getElementById('lengapi-relevansi').value;
                const tipe = document.getElementById('lengapi-tipe').value;

                await updateCertification(certId, {
                    relevansi: relevansi,
                    tipeSertifikasi: tipe
                });
                lengapiModal.style.display = 'none';
            });
        }

        // Function to show a custom confirmation modal
        function showConfirmationModal(message, onConfirm) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content bg-gray-800 text-gray-200">
                    <span class="close-button">&times;</span>
                    <p class="text-lg mb-4">${message}</p>
                    <div class="flex justify-end space-x-4">
                        <button class="button-secondary bg-gray-600 hover:bg-gray-700 text-white" id="confirm-cancel">Batal</button>
                        <button class="button-primary bg-blue-600 hover:bg-blue-700 text-white" id="confirm-ok">OK</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            modal.style.display = 'flex';

            modal.querySelector('.close-button').onclick = () => modal.remove();
            modal.querySelector('#confirm-cancel').onclick = () => modal.remove();
            modal.querySelector('#confirm-ok').onclick = () => {
                onConfirm();
                modal.remove();
            };

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.remove();
                }
            }
        }


        document.addEventListener('DOMContentLoaded', function () {
            initFirebase(); // Inisialisasi Firebase saat DOM dimuat

            // --- Main Sidebar Navigation Logic ---
            const mainNavLinks = document.querySelectorAll('#sidebar-nav .sidebar-link');
            const mainContentPanels = document.querySelectorAll('#content-area > .content-panel');

            // Fungsi untuk menampilkan konten berdasarkan menu yang dipilih (diperbarui untuk main sidebar)
            function showContent(targetId) {
                mainContentPanels.forEach(panel => {
                    panel.classList.remove('active');
                });
                document.getElementById(targetId).classList.add('active');

                mainNavLinks.forEach(nav => {
                    nav.classList.remove('active');
                    if (nav.getAttribute('data-target') === targetId) {
                        nav.classList.add('active');
                    }
                });
                // If the target is 'panel-sertifikasi', ensure initial view is table and refresh data
                if (targetId === 'panel-sertifikasi') {
                    // Default to showing the 'Panduan Umum' section within 'panel-sertifikasi'
                    switchSertifikasiView('#sertifikasi-panduan-umum');
                }
                // If the target is 'panel-kinerja', ensure initial view is Panduan Umum
                if (targetId === 'panel-kinerja') {
                    switchKinerjaView('#kinerja-panduan-umum');
                }
                // If the target is 'panel-pelatihan', ensure initial view is Kategori Pelatihan
                if (targetId === 'panel-pelatihan') {
                    switchPelatihanView('#pelatihan-kategori');
                }
            }

            mainNavLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('data-target');
                    showContent(targetId);
                });
            });

            // --- General Info Modal Logic ---
            const infoModalGeneral = document.getElementById('info-modal-general');
            const infoModalGeneralTitle = document.getElementById('modal-title-general');
            const infoModalGeneralInfo = document.getElementById('modal-info-general');
            const infoModalGeneralCloseButton = document.getElementById('modal-close-button-general');

            const openInfoModal = (title, info) => {
                if(infoModalGeneral) {
                    infoModalGeneralTitle.textContent = title;
                    infoModalGeneralInfo.textContent = info;
                    infoModalGeneral.style.visibility = 'visible';
                    infoModalGeneral.classList.remove('opacity-0');
                    infoModalGeneral.querySelector('.info-modal-content').classList.remove('scale-95');
                }
            };

            const closeInfoModal = () => {
                   if(infoModalGeneral) {
                    infoModalGeneral.classList.add('opacity-0');
                    infoModalGeneral.querySelector('.info-modal-content').classList.add('scale-95');
                    setTimeout(() => {
                        infoModalGeneral.style.visibility = 'hidden';
                    }, 300);
                }
            };
            
            document.querySelectorAll('.info-trigger').forEach(trigger => {
                trigger.addEventListener('click', () => {
                    openInfoModal(trigger.dataset.title, trigger.dataset.info);
                });
            });

            if(infoModalGeneralCloseButton) infoModalGeneralCloseButton.addEventListener('click', closeInfoModal);
            if(infoModalGeneral) infoModalGeneral.addEventListener('click', e => (e.target === infoModalGeneral) && closeInfoModal());


            // --- 'Riwayat Jabatan' Panel Logic ---
            const jabatanSidebarLinks = document.querySelectorAll('#jabatan-sidebar-nav .jabatan-sidebar-link');
            const jabatanContentSections = document.querySelectorAll('#panel-jabatan .jabatan-content-section');
            const jabatanLengkapiButtons = document.querySelectorAll('.jabatan-lengkapi-btn');
            const jabatanCancelEditButton = document.getElementById('jabatan-cancel-edit');
            const jabatanEditJabatanInput = document.getElementById('jabatan-edit-jabatan');

            function switchJabatanView(targetId) {
                jabatanContentSections.forEach(section => {
                    section.classList.remove('active');
                    if ('#' + section.id === targetId) {
                        section.classList.add('active');
                    }
                });
                jabatanSidebarLinks.forEach(link => {
                    link.classList.remove('jabatan-sidebar-active');
                    if (link.getAttribute('href') === targetId) {
                        link.classList.add('jabatan-sidebar-active');
                    }
                });
            }

            jabatanSidebarLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    switchJabatanView(targetId);
                });
            });

            jabatanLengkapiButtons.forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    const row = this.closest('tr');
                    const jabatan = row.cells[0].textContent;
                    if(jabatanEditJabatanInput) {
                        jabatanEditJabatanInput.value = jabatan;
                    }
                    switchJabatanView('#jabatan-simulasi');
                });
            });

            if(jabatanCancelEditButton) {
                jabatanCancelEditButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    switchJabatanView('#jabatan-riwayat-jabatan');
                });
            }


            // --- 'Riwayat Pelatihan' Panel Logic ---
            const pelatihanSidebarLinks = document.querySelectorAll('#pelatihan-sidebar-nav .pelatihan-sidebar-link');
            const pelatihanContentSections = document.querySelectorAll('#panel-pelatihan .pelatihan-content-section');
            
            function switchPelatihanView(targetId) {
                pelatihanContentSections.forEach(section => {
                    section.classList.remove('active');
                    if ('#' + section.id === targetId) {
                        section.classList.add('active');
                    }
                });
                pelatihanSidebarLinks.forEach(link => {
                    link.classList.remove('pelatihan-sidebar-active');
                    if (link.getAttribute('href') === targetId) {
                        link.classList.add('pelatihan-sidebar-active');
                    }
                });
            }

            pelatihanSidebarLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    switchPelatihanView(targetId);
                });
            });


            // --- 'Pencapaian Kinerja' Panel Logic ---
            const kinerjaSidebarLinks = document.querySelectorAll('#kinerja-sidebar-nav .kinerja-sidebar-link');
            const kinerjaContentSections = document.querySelectorAll('#panel-kinerja .kinerja-content-section');

            function switchKinerjaView(targetId) {
                kinerjaContentSections.forEach(section => {
                    section.classList.remove('active');
                    if ('#' + section.id === targetId) {
                        section.classList.add('active');
                    }
                });
                kinerjaSidebarLinks.forEach(link => {
                    link.classList.remove('kinerja-sidebar-active');
                    if (link.getAttribute('href') === targetId) {
                        link.classList.add('kinerja-sidebar-active');
                    }
                });
            }

            kinerjaSidebarLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    switchKinerjaView(targetId);
                });
            });


            const evidenceData = [
                { icon: '📄', title: 'Laporan Penilaian Kinerja', details: '<ul><li class="mb-2"><b>SKP (Sasaran Kinerja Pegawai):</b> Screenshoot KipApp.</li><li class="mb-2"><b>PPK (Penilaian Prestasi Kinerja):</b> Screenshoot KipApp.</li><li><b>Evaluasi Target & Realisasi:</b> Screenshoot KipApp.</li></ul>' },
                { icon: '🏆', title: 'Penghargaan/Piagam', details: '<ul><li class="mb-2"><b>Piagam Penghargaan:</b> Upload Sertifikat.</li><li class="mb-2"><b>Sertifikat Apresiasi:</b> Upload Sertifikat</li><li><b>Surat Keputusan Penghargaan:</b> Upload Sertifikat.</li></ul>' },
                { icon: '📂', title: 'Dokumentasi Proyek/Program', details: '<ul><li class="mb-2"><b>Upload Bukti:</b> Semua dokumen digabung kedalam satu file PDF</li><li class="mb-2"><b>Dokumentasi Kegiatan (Foto/Video):</b> KAK Program Kerja/ Notulensi dan daftar hadir/ Screenshoot pengembangan aplikasi/website</li><li><b>Surat Keputusan:</b> SK Ketua Tim Kerja/ surat tugas.</li></ul>' }
            ];

            const evidenceContainer = document.getElementById('evidence-cards');
            if(evidenceContainer) {
                evidenceContainer.innerHTML = ''; 
                evidenceData.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'card bg-gray-700 p-6 rounded-xl shadow-lg cursor-pointer text-gray-200'; /* Updated styling */
                    card.innerHTML = `
                        <div class="flex items-center space-x-4">
                            <span class="text-3xl">${item.icon}</span>
                            <h3 class="font-semibold text-lg text-white">${item.title}</h3>
                        </div>
                        <div class="details hidden mt-4 text-gray-400 text-sm">${item.details}</div>
                    `;
                    evidenceContainer.appendChild(card);
                    
                    card.addEventListener('click', () => {
                        const details = card.querySelector('.details');
                        const isHidden = details.classList.contains('hidden');
                        document.querySelectorAll('#evidence-cards .details').forEach(d => d.classList.add('hidden'));
                        document.querySelectorAll('#evidence-cards .card').forEach(c => c.classList.remove('ring-2', 'ring-[#A9C5A0]'));
                        if (isHidden) {
                            details.classList.remove('hidden');
                            card.classList.add('ring-2', 'ring-[#A9C5A0]');
                        }
                    });
                });
            }

            // Data for the new dropdown in "Panduan Peran Khusus"
            const specialGuidanceDropdownData = {
                ketua_tim: { title: 'Pengelola Tim (Ketua Tim)', content: '<p class="font-semibold">Aturan Pengisian:</p><ul class="list-disc list-inside space-y-2 mt-2"><li><b>Nama Pencapaian:</b> Contoh: "Ketua Tim Podcast \'PASKALIBAH\'".</li><li><b>Pencapaian Kinerja:</b> Disesuaikan dengan SKP dan PPK tahun bertugas.</li><li><b>Penghargaan:</b> Diisi jika ada penghargaan terkait.</li><li><b>Dampak Kontribusi:</b> Ditetapkan sebagai "Dampak Sedang".</li><li><b>Bukti Pencapaian:</b> Wajib melampirkan SK penunjukan ketua tim dan sertifikat penghargaan (jika ada).</li></ul>' },
                anggota_tim: { title: 'Anggota Tim', content: '<p class="font-semibold">Aturan Pengisian:</p><ul class="list-disc list-inside space-y-2 mt-2"><li><b>Nama Pencapaian:</b> Contoh: "Anggota Tim Podcast \'PASKALIBAH\'".</li><li><b>Pencapaian Kinerja:</b> Disesuaikan dengan SKP dan PPK tahun bertugas.</li><li><b>Penghargaan:</b> Diisi jika ada penghargaan terkait.</li><li><b>Dampak Kontribusi:</b> Ditetapkan sebagai "Dampak Rendah".</li><li><b>Bukti Pencapaian:</b> Wajib melampirkan SK penunjukan anggota tim dan sertifikat penghargaan (jika ada).</li></ul>' },
                pengelola_keuangan: { title: 'Jabatan Pengelola Keuangan (Bendahara, PPK, PPSPM, PBJ)', content: '<p class="font-semibold">Aturan Pengisian:</p><ul class="list-disc list-inside space-y-2 mt-2"><li>Tetap dimasukkan sebagai "Pencapaian Kinerja" untuk jabatan pengelola keuangan dan Pejabat Pengadaan yang tidak termasuk sebagai kelompok jabatan di SIMPEG.</li><li>Wajib mencantumkan jabatannya (misalnya, "Bendahara", "PPK").</li><li><b>Penghargaan:</b> Diisi jika ada penghargaan terkait.</li><li><b>Dampak Kontribusi:</b> Ditetapkan sebagai "Dampak Sedang".</li><li><b>Bukti Pencapaian:</b> Wajib melampirkan SK Pengelola Keuangan/SK Pejabat Pengadaan dan sertifikat penghargaan (jika ada).</li></ul>' },
                plt: { title: 'Pelaksana Tugas (Plt.)', content: '<p class="font-semibold">Aturan Pengisian:</p><ul class="list-disc list-inside space-y-2 mt-2"><li>Pencapaian selama menjabat Plt dimasukkan ke dalam "Pencapaian Kinerja".</li><li><b>Penghargaan:</b> Diisi jika ada penghargaan terkait.</li><li><b>Dampak Kontribusi:</b> untuk Plt. Eselon IV Ditetapkan sebagai "Dampak Sedang", untuk Plt. Eselon III dan II ditetapkan sebagai "Dampak Tinggi".</li><li><b>Bukti Pencapaian:</b> Wajib melampirkan SK Plt. dan sertifikat penghargaan (jika ada).</li></ul>' }
            };

            const roleSelector = document.getElementById('role-selector');
            const roleExplanationBox = document.getElementById('role-explanation-box');

            if (roleSelector && roleExplanationBox) {
                roleSelector.addEventListener('change', (e) => {
                    const selectedRoleKey = e.target.value;
                    if (selectedRoleKey && specialGuidanceDropdownData[selectedRoleKey]) {
                        const data = specialGuidanceDropdownData[selectedRoleKey];
                        roleExplanationBox.innerHTML = `
                            <h4 class="font-bold text-lg text-white mb-2">${data.title}</h4>
                            ${data.content}
                        `;
                        roleExplanationBox.style.display = 'block'; // Show the box
                    } else {
                        roleExplanationBox.innerHTML = '';
                        roleExplanationBox.style.display = 'none'; // Hide the box
                    }
                });
            }


            const simulationData = {
                ketua_tim: { nama: "Ketua Tim Podcast 'PASKALIBAH'", kinerja_option: "diatas_ekspektasi", penghargaan_option: "internal_lokal", dampak_option: "sedang" },
                anggota_tim: { nama: "Anggota Tim Podcast 'PASKALIBAH'", kinerja_option: "sesuai_ekspektasi", penghargaan_option: "tidak_ada", dampak_option: "rendah" }, /* New data */
                bendahara: { nama: "Bendahara", kinerja_option: "sesuai_ekspektasi", penghargaan_option: "tidak_ada", dampak_option: "rendah" },
                plt: { nama: "Plt. Kepala Seksi Statistik Distribusi", kinerja_option: "sesuai_ekspektasi", penghargaan_option: "tidak_ada", dampak_option: "rendah" }
            };
            const kinerjaDescriptions = {
                dibawah_ekspektasi: { title: "Dibawah Ekspektasi", description: "Tidak mencapai target atau kinerja tidak sesuai dengan standar. Hasil SKP dan PPK 2023 keatas, apabila hasil evaluasi dibawah ekspektasi." },
                sesuai_ekspektasi: { title: "Sesuai Ekspektasi", description: "Kinerja memenuhi sebagian besar ekspektasi atau target yang ditetapkan. Hasil SKP dan PPK 2023 keatas, apabila hasil evaluasi sesuai ekspektasi." },
                diatas_ekspektasi: { title: "Diatas Ekspektasi", description: "Kinerja melebihi ekspektasi dan target yang ditetapkan. Hasil SKP dan PPK 2024, apabila hasil evaluasi diatas ekspektasi." }
            };
            const dampakDescriptions = {
                rendah: { title: "Dampak Rendah", description: "Tidak berkontribusi signifikan dalam proyek/ sebagai anggota tim kerja." },
                sedang: { title: "Dampak Sedang", description: "Sebagai Ketua Tim Kerja/ Plt. Kepala Seksi/Plt. Kasubbag/ termasuk pengelola keuangan (PPK, Bendahara, dan PPSPM)/ Kelompok Pejabat Pengadaan/ berkontribusi dalam proyek kecil atau menengah dengan dampak terbatas." },
                tinggi: { title: "Dampak Tinggi", description: "Plt. Kepala Satker (eselon II dan III)/ Plt. Kepala Bagian Umum/ berkontribusi dalam proyek besar atau strategis yang berpengaruh besar." }
            };
            const penghargaanDescriptions = {
                tidak_ada: { title: "Tidak ada Penghargaan", description: "Tidak menerima penghargaan dalam periode yang dinilai." },
                internal_lokal: { title: "Penghargaan Tingkat Internal/Lokal", description: "Menerima penghargaan dalam lingkup lokal atau internal organisasi." },
                nasional_internasional: { title: "Penghargaan Tingkat Nasional/Internasional", description: "Penghargaan dari tingkat nasional atau internasional." }
            };

            const scenarioSelector = document.getElementById('scenario-selector');
            const simNamaInput = document.getElementById('nama-pencapaian');
            const simKinerjaSelect = document.getElementById('pencapaian-kinerja');
            const simPenghargaanSelect = document.getElementById('penghargaan');
            const simDampakSelect = document.getElementById('dampak-kontribusi');
            const infoModal = document.getElementById('infoModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            const closeModalButton = document.getElementById('closeModal');

            function showKinerjaModal(title, description) {
                if(infoModal && modalTitle && modalBody) {
                    modalTitle.textContent = title;
                    modalBody.textContent = description;
                    infoModal.classList.add('show');
                }
            }
            function hideKinerjaModal() {
                if(infoModal) infoModal.classList.remove('show');
            }
            
            if(closeModalButton) closeModalButton.addEventListener('click', hideKinerjaModal);
            if(infoModal) infoModal.addEventListener('click', (e) => { if (e.target === infoModal) hideKinerjaModal(); });

            function updateSimulation(scenario) {
                const data = simulationData[scenario];
                if(data && simNamaInput && simKinerjaSelect && simPenghargaanSelect && simDampakSelect) {
                    simNamaInput.value = data.nama;
                    simKinerjaSelect.value = data.kinerja_option;
                    simPenghargaanSelect.value = data.penghargaan_option;
                    simDampakSelect.value = data.dampak_option;
                }
            }

            if(scenarioSelector) {
                scenarioSelector.addEventListener('change', (e) => updateSimulation(e.target.value));
                simKinerjaSelect.addEventListener('change', (e) => { const info = kinerjaDescriptions[e.target.value]; if(info) showKinerjaModal(info.title, info.description); else hideKinerjaModal(); });
                simDampakSelect.addEventListener('change', (e) => { const info = dampakDescriptions[e.target.value]; if(info) showKinerjaModal(info.title, info.description); else hideKinerjaModal(); });
                simPenghargaanSelect.addEventListener('change', (e) => { const info = penghargaanDescriptions[e.target.value]; if(info) showKinerjaModal(info.title, info.description); else hideKinerjaModal(); });
                updateSimulation('ketua_tim');
            }

            // --- Riwayat Sertifikasi specific event listeners ---
            const sertifikasiSidebarLinks = document.querySelectorAll('#sertifikasi-sidebar-nav .sertifikasi-sidebar-link');
            const sertifikasiContentSections = document.querySelectorAll('#panel-sertifikasi .sertifikasi-content-section');

            function switchSertifikasiView(targetId) {
                sertifikasiContentSections.forEach(section => {
                    section.classList.remove('active');
                    if ('#' + section.id === targetId) {
                        section.classList.add('active');
                    }
                });
                sertifikasiSidebarLinks.forEach(link => {
                    link.classList.remove('sertifikasi-sidebar-active');
                    if (link.getAttribute('href') === targetId) {
                        link.classList.add('sertifikasi-sidebar-active');
                    }
                });
                // If switching to riwayat, ensure table view is active
                if (targetId === '#sertifikasi-riwayat') {
                    currentView = 'table';
                    document.getElementById('toggle-table-view').classList.add('active');
                    document.getElementById('toggle-card-view').classList.remove('active');
                    filterAndSearchCertifications(); // Re-render certifications
                }
            }

            sertifikasiSidebarLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    switchSertifikasiView(targetId);
                });
            });

            // Tombol "Buat Riwayat Sertifikasi"
            const createRiwayatButton = document.getElementById('create-riwayat-button');
            if (createRiwayatButton) {
                createRiwayatButton.addEventListener('click', () => {
                    switchSertifikasiView('#sertifikasi-simulasi'); // Navigate to the form section
                });
            }

            // Form Pengisian Sertifikasi
            const sertifikasiForm = document.getElementById('sertifikasi-form');
            if (sertifikasiForm) {
                sertifikasiForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const newCert = {
                        namaSertifikasi: document.getElementById('nama-sertifikasi').value,
                        tingkatSertifikasi: document.getElementById('tingkat-sertifikasi').value,
                        relevansi: document.getElementById('relevansi-sertifikasi').value,
                        tingkatSertifikasiLainnya: document.getElementById('tingkat-sertifikasi-lainnya').value,
                        jenisSertifikasi: document.getElementById('jenis-sertifikasi').value,
                        buktiSertifikasiUrl: '', // Placeholder for actual upload
                        status: 'Diajukan' // Default status
                    };
                    saveCertification(newCert);
                });
            }

            // Tombol Batal pada form pengisian
            const cancelFormButton = document.getElementById('cancel-form-button');
            if (cancelFormButton) {
                cancelFormButton.addEventListener('click', () => {
                    document.getElementById('sertifikasi-form').reset();
                    switchSertifikasiView('#sertifikasi-riwayat'); // Return to riwayat view
                    document.getElementById('tingkat-sertifikasi-narrative').textContent = ''; // Clear narrative on cancel
                });
            }

            // Event listener for Tingkat Sertifikasi dropdown
            const tingkatSertifikasiSelect = document.getElementById('tingkat-sertifikasi');
            if (tingkatSertifikasiSelect) {
                tingkatSertifikasiSelect.addEventListener('change', (e) => {
                    const selectedLevel = e.target.value;
                    const narrativeElement = document.getElementById('tingkat-sertifikasi-narrative');
                    narrativeElement.textContent = tingkatSertifikasiNarratives[selectedLevel] || '';
                });
            }

            // Filter buttons
            document.querySelectorAll('.filter-buttons button').forEach(button => {
                button.addEventListener('click', (e) => {
                    document.querySelectorAll('.filter-buttons button').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    currentFilterStatus = e.target.dataset.filter;
                    filterAndSearchCertifications();
                });
            });

            // Search input
            const searchSertifikasiInput = document.getElementById('search-sertifikasi');
            if (searchSertifikasiInput) {
                searchSertifikasiInput.addEventListener('keyup', (e) => {
                    currentSearchText = e.target.value;
                    filterAndSearchCertifications();
                });
            }

            // View toggle buttons
            const toggleTableView = document.getElementById('toggle-table-view');
            const toggleCardView = document.getElementById('toggle-card-view');

            if (toggleTableView) {
                toggleTableView.addEventListener('click', () => {
                    currentView = 'table';
                    toggleTableView.classList.add('active');
                    toggleCardView.classList.remove('active');
                    renderCertifications(displayedCertifications);
                });
            }

            if (toggleCardView) {
                toggleCardView.addEventListener('click', () => {
                    currentView = 'card';
                    toggleCardView.classList.add('active');
                    toggleTableView.classList.remove('active');
                    renderCertifications(displayedCertifications);
                });
            }
        });
    </script>
</body>
</html>
